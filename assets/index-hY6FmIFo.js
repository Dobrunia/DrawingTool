(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const F='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.6667 13.6667L18 10.3333L14.6667 7M18 10.3333H8.83333C7.94928 10.3333 7.10143 10.6845 6.47631 11.3096C5.85119 11.9348 5.5 12.7826 5.5 13.6667C5.5 14.5507 5.85119 15.3986 6.47631 16.0237C7.10143 16.6488 7.94928 17 8.83333 17H9.66667"/></svg>',T='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.33333 13.6667L6 10.3333L9.33333 7M6 10.3333H15.1667C16.0507 10.3333 16.8986 10.6845 17.5237 11.3096C18.1488 11.9348 18.5 12.7826 18.5 13.6667C18.5 14.5507 18.1488 15.3986 17.5237 16.0237C16.8986 16.6488 16.0507 17 15.1667 17H14.3333"/></svg>',b=document.getElementById("undo"),C=document.getElementById("redo"),r=document.getElementById("drawingCanvas"),c=r.getContext("2d"),D=document.querySelector(".brush-size"),M=document.getElementById("save"),L=document.querySelectorAll(".tool-btn"),E=document.querySelector(".color-selector"),x=document.querySelectorAll(".color-btn");let h=[],m=[],p=!1,v="brush",k="#FFFFFF",f=4;b.innerHTML=T;C.innerHTML=F;const l=document.createElement("div");l.style.position="absolute";l.style.borderRadius="50%";l.style.pointerEvents="none";l.style.zIndex="1000";l.style.border="2px solid rgba(255, 255, 255, 0.5)";l.style.display="none";document.body.appendChild(l);r.style.cursor="none";r.addEventListener("mouseenter",()=>{l.style.display="block"});r.addEventListener("mouseleave",()=>{l.style.display="none"});r.addEventListener("mousemove",e=>{const t=e.clientX-f/2,n=e.clientY-f/2;l.style.left=`${t}px`,l.style.top=`${n}px`});const a=new Image;a.src="1.png";a.onload=function(){r.width=a.width,r.height=a.height,c.drawImage(a,0,0,a.width,a.height),B()};L.forEach(e=>{e.addEventListener("click",function(){var t;L.forEach(n=>n.classList.remove("active")),e.classList.add("active"),v=((t=e.textContent)==null?void 0:t.toLowerCase())||"brush",v==="blur"?E.style.display="none":E.style.display="flex"})});x.forEach(e=>{e.addEventListener("click",function(){x.forEach(t=>t.classList.remove("active")),e.classList.add("active"),k=window.getComputedStyle(e).backgroundColor})});D.addEventListener("input",function(){f=Number(this.value),l.style.width=`${f}px`,l.style.height=`${f}px`});r.addEventListener("mousedown",P);r.addEventListener("mouseup",I);r.addEventListener("mousemove",H);r.addEventListener("mouseleave",I);function P(e){p=!0;const t=e.clientX-r.offsetLeft,n=e.clientY-r.offsetTop;c.beginPath(),c.moveTo(t,n)}function I(){p&&(p=!1,c.closePath(),B())}function H(e){if(!p)return;const t=e.clientX-r.offsetLeft,n=e.clientY-r.offsetTop;if(c.lineWidth=f,c.lineCap="round",v==="brush")c.strokeStyle=k,c.lineTo(t,n),c.stroke(),c.moveTo(t,n);else if(v==="blur"){const i=f/2,o=i*2,s=c.getImageData(t-i,n-i,o,o);O(s),c.putImageData(s,t-i,n-i)}}function O(e){const t=e.data,n=e.width,i=e.height;for(let o=0;o<i;o++)for(let s=0;s<n;s++){const d=(o*n+s)*4,g=q(t,n,i,s,o),u=z(g);t[d]=u[0],t[d+1]=u[1],t[d+2]=u[2]}}function q(e,t,n,i,o){const s=[];for(let d=-1;d<=1;d++)for(let g=-1;g<=1;g++){const u=i+g,y=o+d;if(u>=0&&u<t&&y>=0&&y<n){const w=(y*t+u)*4;s.push([e[w],e[w+1],e[w+2]])}}return s}function z(e){const t=[0,0,0];e.forEach(i=>{t[0]+=i[0],t[1]+=i[1],t[2]+=i[2]});const n=e.length;return[t[0]/n,t[1]/n,t[2]/n]}b.addEventListener("click",N);C.addEventListener("click",R);function B(){m=[],h.push(r.toDataURL())}function N(){if(h.length>0){m.push(h.pop());const e=h[h.length-1]||a.src;S(e)}}function R(){if(m.length>0){const e=m.pop();h.push(e),S(e)}}function S(e){const t=new Image;t.src=e,t.onload=()=>{c.clearRect(0,0,r.width,r.height),c.drawImage(t,0,0)}}M.addEventListener("click",()=>{const e=document.createElement("a");e.download="canvas-image.png",e.href=r.toDataURL(),e.click()});
